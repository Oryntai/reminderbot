name: Ping reminder bot

on:
  schedule:
    # Asia/Almaty = UTC+5
    # 14:00 Алматы => 09:00 UTC (Mon, Tue, Wed)
    - cron: "0 9 * * 1,2,3"
    # 15:00 Алматы => 10:00 UTC (Mon, Tue)
    - cron: "0 10 * * 1,2"
  workflow_dispatch: {}

jobs:
  ping:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Wake up Render and send reminder (retry)
        run: |
          echo "Attempt 1 (wake up)"
          curl -sS -m 90 -o /dev/null -w "HTTP %{http_code}\n" https://reminderbot-91rq.onrender.com/tick || true

          echo "Sleep 25 seconds"
          sleep 25

          echo "Attempt 2 (send)"
          curl -sS -m 90 -o /dev/null -w "HTTP %{http_code}\n" https://reminderbot-91rq.onrender.com/tick
